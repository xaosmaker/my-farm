// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: supplies.sql

package db

import (
	"context"
)

const createSupplies = `-- name: CreateSupplies :one
INSERT INTO supplies (
supply_type,
nickname,
name,
measurement_unit,
farm_id,
created_at,
updated_at
)VALUES(
  $1,
  $2,
  $3,
  $4,
  $5,
  CURRENT_TIMESTAMP,
  CURRENT_TIMESTAMP
  ) RETURNING id, supply_type, nickname, name, measurement_unit, farm_id, created_at, updated_at, deleted_at
`

type CreateSuppliesParams struct {
	SupplyType      interface{}
	Nickname        *string
	Name            string
	MeasurementUnit interface{}
	FarmID          int64
}

func (q *Queries) CreateSupplies(ctx context.Context, arg CreateSuppliesParams) (Supply, error) {
	row := q.db.QueryRow(ctx, createSupplies,
		arg.SupplyType,
		arg.Nickname,
		arg.Name,
		arg.MeasurementUnit,
		arg.FarmID,
	)
	var i Supply
	err := row.Scan(
		&i.ID,
		&i.SupplyType,
		&i.Nickname,
		&i.Name,
		&i.MeasurementUnit,
		&i.FarmID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}

const deleteSupply = `-- name: DeleteSupply :exec
DELETE FROM supplies
WHERE supplies.deleted_at IS NULL 
AND supplies.farm_id = $1 AND id = $2
`

type DeleteSupplyParams struct {
	FarmID int64
	ID     int64
}

func (q *Queries) DeleteSupply(ctx context.Context, arg DeleteSupplyParams) error {
	_, err := q.db.Exec(ctx, deleteSupply, arg.FarmID, arg.ID)
	return err
}

const getAllSupplies = `-- name: GetAllSupplies :many
SELECT id, supply_type, nickname, name, measurement_unit, farm_id, created_at, updated_at, deleted_at FROM supplies
WHERE farm_id = $1
AND deleted_at IS NULL
`

func (q *Queries) GetAllSupplies(ctx context.Context, farmID int64) ([]Supply, error) {
	rows, err := q.db.Query(ctx, getAllSupplies, farmID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Supply
	for rows.Next() {
		var i Supply
		if err := rows.Scan(
			&i.ID,
			&i.SupplyType,
			&i.Nickname,
			&i.Name,
			&i.MeasurementUnit,
			&i.FarmID,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.DeletedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getSupplyDetails = `-- name: GetSupplyDetails :one
SELECT id, supply_type, nickname, name, measurement_unit, farm_id, created_at, updated_at, deleted_at FROM supplies 
WHERE deleted_at IS NULL 
AND supplies.farm_id = $1
AND supplies.id = $2
`

type GetSupplyDetailsParams struct {
	FarmID int64
	ID     int64
}

func (q *Queries) GetSupplyDetails(ctx context.Context, arg GetSupplyDetailsParams) (Supply, error) {
	row := q.db.QueryRow(ctx, getSupplyDetails, arg.FarmID, arg.ID)
	var i Supply
	err := row.Scan(
		&i.ID,
		&i.SupplyType,
		&i.Nickname,
		&i.Name,
		&i.MeasurementUnit,
		&i.FarmID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.DeletedAt,
	)
	return i, err
}
